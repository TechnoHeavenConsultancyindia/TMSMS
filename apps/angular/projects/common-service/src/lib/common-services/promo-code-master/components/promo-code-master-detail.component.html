<abp-modal [busy]="service.isBusy" [(visible)]="service.isVisible">
  <ng-template #abpHeader>
    <!--<suite-custom-code-block-0>-->
    <!--</suite-custom-code-block-0>-->
    <h3>
      <!--<suite-custom-code-block-1>-->
      <!--</suite-custom-code-block-1>-->
      {{
        (service.selected ? 'AbpUi::Edit' : 'CommonService::NewPromoCodeMaster')
          | abpLocalization
      }}
      <!--<suite-custom-code-block-2>-->
      <!--</suite-custom-code-block-2>-->
    </h3>
    <!--<suite-custom-code-block-3>-->
    <!--</suite-custom-code-block-3>-->
  </ng-template>

  <ng-template #abpBody>
    <!--<suite-custom-code-block-4>-->
    <!--</suite-custom-code-block-4>-->
    <form
      [formGroup]="service.form"
      id="promo-code-master"
      (ngSubmit)="service.submitForm()"
      validateOnSubmit
    >
      <!--<suite-custom-code-block-5>-->
      <!--</suite-custom-code-block-5>-->

      <ul ngbNav #nav="ngbNav" class="nav-tabs">
        <li ngbNavItem>
          <a ngbNavLink>
            {{ 'CommonService::PromoCodeMaster' | abpLocalization }}
          </a>
          <ng-template ngbNavContent>
            <div class="mt-2 fade-in-top">
              <div class="mb-3">
                <label class="form-label" for="promo-code-master-name">
                  {{ 'CommonService::Name' | abpLocalization }} *
                </label>

                <input
                  id="promo-code-master-name"
                  formControlName="name"
                  class="form-control"
                  maxlength="255"
                  autofocus
                />
              </div>

              <div class="mb-3">
                <label class="form-label" for="promo-code-master-promo-code">
                  {{ 'CommonService::PromoCode' | abpLocalization }}
                </label>

                <input
                  id="promo-code-master-promo-code"
                  formControlName="promoCode"
                  class="form-control"
                  maxlength="50"
                />
              </div>

              <div class="mb-3">
                <label class="form-label" for="promo-code-master-service-type">
                  {{ 'CommonService::ServiceType' | abpLocalization }}
                </label>

                <input
                  id="promo-code-master-service-type"
                  formControlName="serviceType"
                  class="form-control"
                  maxlength="100"
                />
              </div>

              <div class="mb-3">
                <label class="form-label" for="promo-code-master-discount-type">
                  {{ 'CommonService::DiscountType' | abpLocalization }}
                </label>

                <input
                  id="promo-code-master-discount-type"
                  formControlName="discountType"
                  class="form-control"
                  maxlength="50"
                />
              </div>

              <div class="mb-3">
                <label class="form-label" for="promo-code-master-discount-value">
                  {{ 'CommonService::DiscountValue' | abpLocalization }} *
                </label>

                <input
                  type="number"
                  id="promo-code-master-discount-value"
                  formControlName="discountValue"
                  class="form-control"
                />
              </div>

              <div class="mb-3">
                <label class="form-label" for="promo-code-master-date-effective-from">
                  {{ 'CommonService::DateEffectiveFrom' | abpLocalization }} *
                </label>

                <div class="input-group" validationTarget>
                  <input
                    readonly
                    id="promo-code-master-date-effective-from"
                    formControlName="dateEffectiveFrom"
                    class="form-control"
                    ngbDatepicker
                    #dateEffectiveFromInput
                    #dateEffectiveFromDatepicker="ngbDatepicker"
                    (click)="dateEffectiveFromDatepicker.open()"
                    (keyup.space)="dateEffectiveFromDatepicker.open()"
                  />
                  @if (dateEffectiveFromInput.value) {
                    <div class="input-group-append">
                      <button
                        class="btn btn-link px-2"
                        type="button"
                        [title]="'AbpUi::Clear' | abpLocalization"
                        (click)="
                          dateEffectiveFromDatepicker.writeValue(null);
                          dateEffectiveFromDatepicker.manualDateChange(null, true)
                        "
                      >
                        <i class="fa fa-times" aria-hidden="true"></i>
                      </button>
                    </div>
                  }
                </div>
              </div>

              <div class="mb-3">
                <label class="form-label" for="promo-code-master-date-effective-to">
                  {{ 'CommonService::DateEffectiveTo' | abpLocalization }} *
                </label>

                <div class="input-group" validationTarget>
                  <input
                    readonly
                    id="promo-code-master-date-effective-to"
                    formControlName="dateEffectiveTo"
                    class="form-control"
                    ngbDatepicker
                    #dateEffectiveToInput
                    #dateEffectiveToDatepicker="ngbDatepicker"
                    (click)="dateEffectiveToDatepicker.open()"
                    (keyup.space)="dateEffectiveToDatepicker.open()"
                  />
                  @if (dateEffectiveToInput.value) {
                    <div class="input-group-append">
                      <button
                        class="btn btn-link px-2"
                        type="button"
                        [title]="'AbpUi::Clear' | abpLocalization"
                        (click)="
                          dateEffectiveToDatepicker.writeValue(null);
                          dateEffectiveToDatepicker.manualDateChange(null, true)
                        "
                      >
                        <i class="fa fa-times" aria-hidden="true"></i>
                      </button>
                    </div>
                  }
                </div>
              </div>

              <div class="mb-3">
                <label class="form-label" for="promo-code-master-max-usage-limit">
                  {{ 'CommonService::MaxUsageLimit' | abpLocalization }}
                </label>

                <input
                  type="number"
                  id="promo-code-master-max-usage-limit"
                  formControlName="maxUsageLimit"
                  class="form-control"
                />
              </div>

              <div class="mb-3">
                <label class="form-label" for="promo-code-master-max-usage-per-user">
                  {{ 'CommonService::MaxUsagePerUser' | abpLocalization }}
                </label>

                <input
                  type="number"
                  id="promo-code-master-max-usage-per-user"
                  formControlName="maxUsagePerUser"
                  class="form-control"
                />
              </div>

              <div class="mb-3">
                <label class="form-label" for="promo-code-master-customer-type">
                  {{ 'CommonService::CustomerType' | abpLocalization }}
                </label>

                <input
                  id="promo-code-master-customer-type"
                  formControlName="customerType"
                  class="form-control"
                  maxlength="50"
                />
              </div>

              <div class="mb-3">
                <label class="form-label" for="promo-code-master-min-booking-amount">
                  {{ 'CommonService::MinBookingAmount' | abpLocalization }} *
                </label>

                <input
                  type="number"
                  id="promo-code-master-min-booking-amount"
                  formControlName="minBookingAmount"
                  class="form-control"
                />
              </div>

              <div class="mb-3">
                <label class="form-label" for="promo-code-master-payment-method">
                  {{ 'CommonService::PaymentMethod' | abpLocalization }}
                </label>

                <input
                  id="promo-code-master-payment-method"
                  formControlName="paymentMethod"
                  class="form-control"
                  maxlength="100"
                />
              </div>

              <div class="mb-3">
                <label class="form-label" for="promo-code-master-user-group">
                  {{ 'CommonService::UserGroup' | abpLocalization }}
                </label>

                <input
                  id="promo-code-master-user-group"
                  formControlName="userGroup"
                  class="form-control"
                  maxlength="100"
                />
              </div>

              <div class="mb-3">
                <label class="form-label" for="promo-code-master-min-no-of-nights">
                  {{ 'CommonService::MinNoOfNights' | abpLocalization }} *
                </label>

                <input
                  type="number"
                  id="promo-code-master-min-no-of-nights"
                  formControlName="minNoOfNights"
                  class="form-control"
                />
              </div>

              <div class="mb-3">
                <label class="form-label" for="promo-code-master-min-no-of-pax">
                  {{ 'CommonService::MinNoOfPax' | abpLocalization }} *
                </label>

                <input
                  type="number"
                  id="promo-code-master-min-no-of-pax"
                  formControlName="minNoOfPax"
                  class="form-control"
                />
              </div>

              <div class="mb-3">
                <label class="form-label" for="promo-code-master-early-bird-days">
                  {{ 'CommonService::EarlyBirdDays' | abpLocalization }} *
                </label>

                <input
                  type="number"
                  id="promo-code-master-early-bird-days"
                  formControlName="earlyBirdDays"
                  class="form-control"
                />
              </div>

              <div class="mb-3">
                <label class="form-label" for="promo-code-master-valid-time-from">
                  {{ 'CommonService::ValidTimeFrom' | abpLocalization }} *
                </label>

                <div class="input-group" validationTarget>
                  <input
                    readonly
                    id="promo-code-master-valid-time-from"
                    formControlName="validTimeFrom"
                    class="form-control"
                    ngbDatepicker
                    #validTimeFromInput
                    #validTimeFromDatepicker="ngbDatepicker"
                    (click)="validTimeFromDatepicker.open()"
                    (keyup.space)="validTimeFromDatepicker.open()"
                  />
                  @if (validTimeFromInput.value) {
                    <div class="input-group-append">
                      <button
                        class="btn btn-link px-2"
                        type="button"
                        [title]="'AbpUi::Clear' | abpLocalization"
                        (click)="
                          validTimeFromDatepicker.writeValue(null);
                          validTimeFromDatepicker.manualDateChange(null, true)
                        "
                      >
                        <i class="fa fa-times" aria-hidden="true"></i>
                      </button>
                    </div>
                  }
                </div>
              </div>

              <div class="mb-3">
                <label class="form-label" for="promo-code-master-valid-time-to">
                  {{ 'CommonService::ValidTimeTo' | abpLocalization }} *
                </label>

                <div class="input-group" validationTarget>
                  <input
                    readonly
                    id="promo-code-master-valid-time-to"
                    formControlName="validTimeTo"
                    class="form-control"
                    ngbDatepicker
                    #validTimeToInput
                    #validTimeToDatepicker="ngbDatepicker"
                    (click)="validTimeToDatepicker.open()"
                    (keyup.space)="validTimeToDatepicker.open()"
                  />
                  @if (validTimeToInput.value) {
                    <div class="input-group-append">
                      <button
                        class="btn btn-link px-2"
                        type="button"
                        [title]="'AbpUi::Clear' | abpLocalization"
                        (click)="
                          validTimeToDatepicker.writeValue(null);
                          validTimeToDatepicker.manualDateChange(null, true)
                        "
                      >
                        <i class="fa fa-times" aria-hidden="true"></i>
                      </button>
                    </div>
                  }
                </div>
              </div>

              <div class="form-check mb-3">
                <input
                  type="checkbox"
                  id="promo-code-master-stackable"
                  formControlName="stackable"
                  class="form-check-input"
                />

                <label for="promo-code-master-stackable" class="form-check-label">
                  {{ 'CommonService::Stackable' | abpLocalization }}
                </label>
              </div>
            </div>
          </ng-template>
        </li>
        <li ngbNavItem>
          <a ngbNavLink>
            {{ 'CommonService::Countries' | abpLocalization }}
            @if (this.service.form.controls['countryIds']; as control) {
              <span> ({{ control.value?.length }}) </span>
            }
          </a>
          <ng-template ngbNavContent>
            <abp-lookup-typeahead-mtm
              cid="promo-code-master-countries"
              formControlName="countryIds"
              displayNameProp="name"
              lookupNameProp="displayName"
              [getFn]="service.getCountryLookup"
              [editingData]="service.selected?.countries"
            ></abp-lookup-typeahead-mtm>
          </ng-template>
        </li>
        <li ngbNavItem>
          <a ngbNavLink>
            {{ 'CommonService::Cities' | abpLocalization }}
            @if (this.service.form.controls['cityIds']; as control) {
              <span> ({{ control.value?.length }}) </span>
            }
          </a>
          <ng-template ngbNavContent>
            <abp-lookup-typeahead-mtm
              cid="promo-code-master-cities"
              formControlName="cityIds"
              displayNameProp="name"
              lookupNameProp="displayName"
              [getFn]="service.getCityLookup"
              [editingData]="service.selected?.cities"
            ></abp-lookup-typeahead-mtm>
          </ng-template>
        </li>
      </ul>
      <div [ngbNavOutlet]="nav"></div>

      <!--<suite-custom-code-block-6>-->
      <!--</suite-custom-code-block-6>-->
    </form>
  </ng-template>

  <ng-template #abpFooter>
    <!--<suite-custom-code-block-7>-->
    <!--</suite-custom-code-block-7>-->
    <button type="button" class="btn btn-secondary" abpClose>
      {{ 'AbpUi::Cancel' | abpLocalization }}
    </button>
    <!--<suite-custom-code-block-8>-->
    <!--</suite-custom-code-block-8>-->
    <abp-button iconClass="fa fa-check" buttonType="submit" formName="promo-code-master">
      {{ 'AbpUi::Save' | abpLocalization }}
    </abp-button>
    <!--<suite-custom-code-block-9>-->
    <!--</suite-custom-code-block-9>-->
  </ng-template>
</abp-modal>
